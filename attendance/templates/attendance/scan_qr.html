{% extends 'attendance/base.html' %}

{% block title %}QR Scanner - Library System{% endblock %}

{% block content %}
<div class="card">
    <h1 style="text-align: center; margin-bottom: 2rem;">ðŸ“± Library Check-In/Out</h1>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
        <div style="text-align: center; padding: 1rem; background: #e8f4fd; border-radius: 10px;">
            <h3>Today's Visitors</h3>
            <div style="font-size: 2rem; font-weight: bold; color: #667eea;">{{ today_count }}</div>
        </div>
        <div style="text-align: center; padding: 1rem; background: #e8f4fd; border-radius: 10px;">
            <h3>Currently in Library</h3>
            <div style="font-size: 2rem; font-weight: bold; color: #28a745;">{{ current_in_library }}</div>
        </div>
    </div>

    <form method="post" style="text-align: center;">
        {% csrf_token %}
        <div style="margin-bottom: 1.5rem;">
            <input type="text" 
                   name="school_id_number" 
                   placeholder="Scan or enter Student ID" 
                   style="width: 100%; max-width: 400px; padding: 1rem; font-size: 1.1rem; border: 2px solid #ddd; border-radius: 8px; text-align: center;"
                   autofocus required>
        </div>
        <button type="submit" class="btn" style="font-size: 1.1rem; padding: 1rem 3rem;">
            Submit Check-In/Out
        </button>
    </form>

    <div style="margin-top: 2rem; text-align: center; color: #666;">
        <p>Simply scan the student's QR code or enter their Student ID manually.</p>
        <p>The system will automatically handle check-in and check-out.</p>
    </div>
</div>

<div style="text-align: center; margin-top: 2rem;">
    {% if user.is_authenticated %}
        <a href="{% url 'dashboard' %}" class="btn btn-success">View Dashboard</a>
    {% else %}
        <a href="{% url 'login' %}" class="btn">Staff Login</a>
    {% endif %}
</div>
{% endblock %}